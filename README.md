# 윷빵 (yutbbang)

전통 윷놀이를 모바일/데스크톱에서 즐길 수 있도록 만든 Flutter 게임입니다.  
Flame으로 게임판을 렌더링하고 Riverpod으로 상태를 관리합니다.

## 주요 기능

- **직관적인 턴 표시**: 현재 어떤 팀의 턴인지 상단 바의 배경색이 변하여 알려줍니다.
- **드라마틱한 윷 애니메이션**: 윷 가락이 공중으로 솟구쳐 회전하며 떨어지는 생동감 있는 연출.
- **낙 특수 효과**: 낙이 나오면 윷 가락 하나가 게임판 밖으로 튀어나가는 재미있는 애니메이션.
- **컨트롤 모드**: 게이지 타이밍에 맞춰 버튼을 떼어 결과를 조절하는 정교한 던지기 시스템.
- **다채로운 전용 규칙**: 빽도 날기, 자동 임신(중앙 합류), 전낙(낙 시 턴 무효), 군밤 모드 등 풍성한 변칙 룰 지원.
- **스마트한 AI**: 난이도 조절이 가능한 지능적인 CPU 대전.
- **강력한 햅틱 피드백**: 모든 게임 액션에서 강한 진동으로 손맛 제공.
- **멀티 플랫폼**: 모바일(Android, iOS) 및 데스크톱 환경 모두 지원.
- **게임 시작 설정**: 팀별 플레이어/CPU 지정, 말 수, 낙 확률 등 상세 설정 제공.

## 시작하기

### 요구 사항

- Flutter SDK (Dart SDK 포함)
- macOS/Windows/Linux 또는 Android/iOS 환경

### 실행

```bash
flutter pub get
flutter run
```

### macOS 실행 예시

```bash
flutter run -d macos
```

## 설정 안내

### 게임 시작 설정(인스턴트)

해당 판에만 적용되는 설정입니다.

- 팀 수/팀 이름
- 팀별 CPU 또는 플레이어 선택
- 말 수, 빽도 사용, 낙 확률
- 군밤 모드 (지름길 자동 선택)

### 글로벌 설정(저장)

전체 게임에 적용되는 기본 설정입니다.

- CPU 난이도
- 낙 확률 (컨트롤 모드용 낙 영역 난이도 설정)
- **컨트롤 모드** 글로벌 활성화/비활성화
- 윷놀이 가이드 보기

### 특수 규칙 (House Rules)

- **빽도 날기**: 대기 중인 말이 빽도가 나오면 즉시 골인 처리.
- **자동 임신**: 중앙(방석) 도착 시 대기 중인 내 말 하나가 자동으로 합류하여 업혀짐.
- **전낙**: 낙 발생 시 해당 턴의 모든 이전 결과가 무효화되고 턴이 즉시 종료.
- **군밤 모드**: 지름길 구간에서 항상 최단 거리로 자동 선택.

## 아이템 모드 (Item Mode) 🎁

게임판 위의 선물 상자 타일에 도착하면 무작위 아이템을 획득합니다. 각 팀은 최대 2개의 아이템을 보유할 수 있습니다.

### 자동 발동 아이템 (조건 충족 시 즉시 발생)

- **🛡️ 낙 방지권(Shield)**: '낙'이 나왔을 때 자동으로 '도'로 변경해주며 기회를 유지합니다.
- **🔄 다시 던지기(Reroll)**: 윷을 던진 직후 결과가 마음에 들지 않으면 즉시 아이템을 소모해 다시 던질 수 있습니다.
- **↩️ 뒷걸음질(Moonwalk)**: 판 위에 있는 말을 선택했을 때 결과가 도/개/걸이라면, 앞으로 가는 대신 정확히 그 칸수만큼 뒤로 갈 수 있습니다. (첫 투입 말 제외)

### 수동 선택 아이템 (가방 아이콘 클릭 후 사용)

- **🌟 황금 윷**: 다음 던지기 결과가 무조건 '윷' 또는 '모'가 됩니다.
- **❄️ 얼음탄**: 다음 순서의 상대 팀을 한 턴 동안 '얼음' 상태로 만들어 턴을 건너뛰게 합니다.
- **🏠 강제 귀가**: 지정한 상대방의 말을 즉시 시작점으로 되돌려 보냅니다.
- **↔️ 위치 교환**: 내 말 하나와 상대방의 말 하나의 위치를 서로 맞바꿉니다.
- **🧲 자석**: 내 말 주변(3칸 이내)에 있는 모든 상대 말을 즉시 잡아 출발지로 보냅니다.
- **🌀 태풍**: 판 위에 있는 모든 말(아군/적군 포함)의 위치를 무작위로 섞어버립니다.

## 프로젝트 구조

- `lib/main.dart`: 앱 엔트리
- `lib/presentation/screens/`: 화면(UI)
- `lib/presentation/providers/`: 상태 관리(Riverpod)
- `lib/domain/logic/`: 게임 규칙 로직
- `lib/domain/models/`: 도메인 모델
- `lib/game/`: Flame 게임 컴포넌트
- `assets/`: 이미지 리소스

## 참고

앱 내 "윷놀이 가이드"에서 규칙과 게임 설명을 확인할 수 있습니다.
